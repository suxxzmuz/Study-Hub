<!-- ì‹œê°„ ë° ì‹œì •í‘œ -->
<!-- ìš”ì¼ ë³„ ì‹œê°„í‘œì™€ ìˆ˜ì—… ì‹œì •ì„ í‘œì‹œí•˜ëŠ” í™”ë©´ -->

<!-- ìˆ˜ì • ëª©ë¡ -->
<!-- ê³¼ëª©ê³¼ êµì‹œê°€ í‘œì‹œë˜ëŠ” tableì— ì„¸ë¡œ êµ¬ë¶„ì„  ì¶”ê°€í•˜ê¸° -->
<!-- ì €ì¥, ì´ˆê¸°í™”, ë©”ì¸í™”ë©´ ë²„íŠ¼ ìˆ˜ì •í•˜ê¸° -->

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Timetable</title>
    <style>
        /* ---------------------------------------------------- */
        /* 1. ê¸°ë³¸ ìŠ¤íƒ€ì¼  */
        /* ---------------------------------------------------- */
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f7f7f7;
            color: #333;
        }

        #pp {
            width: 100%;
            padding: 0 15px;
            max-width: 700px;
            margin: 0 auto;
        }

        .card-box {
            background: #ffffff; 
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0px;
            border: 1px solid #e0e0e0; 
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        h1 {
            text-align: center;
            margin: 15px 0 25px 0;
            font-size: 1.6rem;
            color: #212121;
            font-weight: 700;
        }

        /* ---------------------------------------------------- */
        /* 2. ì‹œê°„í‘œ (Timetable) ìŠ¤íƒ€ì¼ */
        /* ---------------------------------------------------- */
        .timetable-list {
            list-style: none;
            padding: 0;
            margin: 10px 0;
        }

        .day-card {
            background-color: #ffffff;
            border: 1px solid #eeeeee; 
            border-radius: 8px;
            margin-bottom: 15px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.03);
        }

        .day-header {
            background-color: #e0e0e0; 
            color: #212121; 
            padding: 10px 15px;
            font-size: 1.1rem;
            font-weight: bold;
            text-align: left;
            border-bottom: 2px solid #e0e0e0;
        }

        .period-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            border-bottom: 1px dashed #f0f0f0;
        }

        .period-item:last-child {
            border-bottom: none;
        }

        .period-item strong {
            width: 25%; 
            font-weight: 600;
            color: #555;
            flex-shrink: 0;
            font-size: 0.95rem;
            text-align: center;
        }

        .period-item input[type="text"] {
            width: 75%; 
            font-size: 0.95rem;
            padding: 0;
            border: 1px solid #ffffff;
            text-align: center;
            background: transparent;
            transition: border-color 0.2s; 
        }
        
        .period-item input[type="text"]:focus {
            border-color: #cccccc;
            outline: none;
        }


        /* ---------------------------------------------------- */
        /* 3. ì‹œì •í‘œ (Schedule) ìŠ¤íƒ€ì¼ */
        /* ---------------------------------------------------- */
        #schedule {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        #schedule, #schedule th, #schedule td {
            border: 1px solid #a0a0a0; 
        }

        #schedule th {
            background-color: #e0e0e0;
            padding: 10px 8px;
            font-size: 1rem;
            text-align: center;
            color: #212121;
        }

        #schedule td {
            padding: 4px;
            text-align: center;
            vertical-align: middle;
        }

        #schedule td input[type="text"] {
            width: 95%;
            padding: 8px 6px;
            font-size: 0.95rem;
            text-align: center;
            background-color: transparent;
            border: none; 
            border-radius: 0;
        }
        
        #schedule td:nth-child(2) input[type="text"] {
            text-align: center;
        }

        /* ---------------------------------------------------- */
        /* 4. ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        /* ---------------------------------------------------- */
        .buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0 50px 0;
            flex-wrap: wrap; 
        }

        .buttons button {
            flex-grow: 1; 
            min-width: 120px;
            padding: 10px 15px;
            font-size: 1rem;
            border: 1px solid #555555;
            background-color: #ffffff; 
            color: #212121;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, border-color 0.3s ease;
            font-weight: 500;
        }

        .buttons button:hover {
            background-color: #f0f0f0;
            border-color: #212121;
        }
    </style>
</head>
<body>
    <div id="pp">
        <div class="section card-box" id="timetable-box">
            <h1>ğŸ—“ï¸ ì‹œê°„í‘œ</h1>
            <div id="new-timetable-container">
            </div>
        </div>
        
        <datalist id="subject">
            <option value="ë…ì„œ"><option value="ë¬¸í•™"><option value="ìˆ˜í•™I"><option value="ìˆ˜í•™II">
            <option value="ì˜ì–´I"><option value="ì˜ì–´II"><option value="í•œêµ­ì‚¬"><option value="ì²´ìœ¡">
            <option value="í™•ë¥ ê³¼ í†µê³„"><option value="ê¸°í•˜"><option value="ìƒí™œê³¼ ìœ¤ë¦¬"><option value="ì •ì¹˜ì™€ ë²•">
            <option value="í•œêµ­ì§€ë¦¬"><option value="ê³ ì „ê³¼ ìœ¤ë¦¬"><option value="ì—¬í–‰ì§€ë¦¬"><option value="ë¬¼ë¦¬í•™I">
            <option value="í™”í•™I"><option value="ìƒëª…ê³¼í•™I"><option value="ì§€êµ¬ê³¼í•™I"><option value="ìƒíƒœì™€ í™˜ê²½">
            <option value="ì •ë³´"><option value="ê°€ì •ê³¼í•™"><option value="ì¼ë³¸ì–´I"><option value="ì°½ì²´(ì§„ë¡œ)">
            <option value="ë™ì•„ë¦¬"><option value="ê³µê°•">
        </datalist>

        <div class="section card-box" id="schedule-box">
            <h1>â° ì‹œì •í‘œ</h1>
            <table id="schedule">
                <colgroup>
                    <col style="width: 35%;">
                    <col style="width: 65%;">
                </colgroup>
                <thead>
                    <tr><th>êµì‹œ</th><th>ì‹œê°„</th></tr>
                </thead>
                <tbody>
                    <tr><td>1êµì‹œ</td><td><input type="text" id="period-1" value="08:40 ~ 09:30"></td></tr>
                    <tr><td>2êµì‹œ</td><td><input type="text" id="period-2" value="09:40 ~ 10:30"></td></tr>
                    <tr><td>3êµì‹œ</td><td><input type="text" id="period-3" value="10:40 ~ 11:30"></td></tr>
                    <tr><td>4êµì‹œ</td><td><input type="text" id="period-4" value="11:40 ~ 12:30"></td></tr>
                    <tr><td>5êµì‹œ</td><td><input type="text" id="period-5" value="13:40 ~ 14:30"></td></tr>
                    <tr><td>6êµì‹œ</td><td><input type="text" id="period-6" value="14:40 ~ 15:30"></td></tr>
                    <tr><td>7êµì‹œ</td><td><input type="text" id="period-7" value="15:40 ~ 16:30"></td></tr>
                </tbody>
            </table>
        </div>
        
        <div class="buttons">
            <button id="saveALlBtn">ğŸ’¾ ì €ì¥</button>
            <button id="clearAllBtn">ğŸ”„ ì´ˆê¸°í™”</button>
            <button id="goHomeBtn">ğŸ  ë©”ì¸ í™”ë©´ìœ¼ë¡œ</button>
        </div>
    </div>

    <script>
        const DAYS = ['MON', 'TUE', 'WED', 'THU', 'FRI'];
        const PERIODS = 7;
        const timetableContainer = document.getElementById('new-timetable-container');

        function saveTimetable() {
            const data = [];
            for (let day = 0; day < DAYS.length; day++) {
                const dayData = [];
                for (let period = 0; period < PERIODS; period++) {
                    const id = `cell-${day}-${period}`;
                    const inputElement = document.getElementById(id);
                    if (inputElement) {
                        dayData.push(inputElement.value);
                    } else {
                        dayData.push(""); 
                    }
                }
                data.push(dayData);
            }
            localStorage.setItem("timetableData", JSON.stringify(data));
        }

        function renderTimetable() {
            timetableContainer.innerHTML = '';
            const storedData = localStorage.getItem("timetableData");
            let tData;
            if (storedData) {
                tData = JSON.parse(storedData);
            } else {
                tData = Array(DAYS.length).fill(0).map(() => Array(PERIODS).fill(""));
            }
            DAYS.forEach((dayLabel, dayIndex) => {
                const dayData = tData[dayIndex] || [];
                const dayCard = document.createElement('div');

                dayCard.className = 'day-card';
                dayCard.innerHTML = `<div class="day-header">${dayLabel}</div>`;
                
                const periodList = document.createElement('div');
                periodList.className = 'timetable-list';
                
                for (let period = 0; period < PERIODS; period++) {
                    const id = `cell-${dayIndex}-${period}`;
                    const subject = dayData[period] || "";

                    periodList.innerHTML += `
                    <div class="period-item">
                        <strong>${period + 1}êµì‹œ</strong>
                        <input type="text" list="subject" id="${id}" value="${subject}">
                        </div>
                        `;
                    }
                    
                    dayCard.appendChild(periodList);
                    timetableContainer.appendChild(dayCard);
                });
            }
            
            function saveSchedule() {
                const data = {};
                for (let i = 1; i <= 7; i++) {
                    data[`period-${i}`] = document.getElementById(`period-${i}`).value;
                }
                localStorage.setItem("scheduleData", JSON.stringify(data));
            }

            function saveAll() {
                saveTimetable();
                saveSchedule();
                alert("ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
            }

            function clearAll() {
                if (confirm("ëª¨ë‘ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                    localStorage.removeItem("timetableData"); 
                    const defaultSchedule = {
                      "period-1": "08:40 ~ 09:30",
                      "period-2": "09:40 ~ 10:30",
                      "period-3": "10:40 ~ 11:30",
                      "period-4": "11:40 ~ 12:30",
                      "period-5": "13:40 ~ 14:30",
                      "period-6": "14:40 ~ 15:30",
                      "period-7": "15:40 ~ 16:30",
                    };
                    for (let i = 1; i <= 7; i++) {
                       document.getElementById(`period-${i}`).value = defaultSchedule[`period-${i}`] || "";
                    }
                    localStorage.removeItem("scheduleData");
                    renderTimetable();
                    alert("ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.");
                }
            }

            function loadAll() {
                renderTimetable();
                const sData = JSON.parse(localStorage.getItem("scheduleData") || "{}");
                for (let i = 1; i <= 7; i++) {
                    const val = sData[`period-${i}`];
                    const periodElement = document.getElementById(`period-${i}`);
                    if (periodElement) {
                         if (val) {
                             periodElement.value = val;
                         } else if (!periodElement.value) {
                         }
                    }
                }
            }

            function goHome() {
                window.location.href = "/index.html"; 
            }
            
            window.onload = function() {
                loadAll();
                const saveBtn = document.getElementById('saveAllBtn');
                if (saveBtn) saveBtn.addEventListener('click', saveAll);
                
                const clearBtn = document.getElementById('clearAllBtn');
                if (clearBtn) clearBtn.addEventListener('click', clearAll);
                
                const homeBtn = document.getElementById('goHomeBtn');
                if (homeBtn) homeBtn.addEventListener('click', goHome);
            };
        </script>
    </body>
</html>